{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kalya\\\\OneDrive\\\\Desktop\\\\kiosk\\\\kiosk_mongo\\\\frontend\\\\src\\\\pages\\\\UserHome.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport QrScanner from \"react-qr-scanner\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserHome({\n  onLogout\n}) {\n  _s();\n  const [scanning, setScanning] = useState(false);\n  const [scanResult, setScanResult] = useState(\"\");\n  const navigate = useNavigate();\n  const handleScan = result => {\n    if (!result) return;\n    const scannedText = result.text;\n    setScanResult(scannedText);\n    setScanning(false);\n\n    // Case 1: QR contains a full URL like:\n    // https://yourapp.com/upload?kioskId=KIOSK12345\n    if (scannedText.startsWith(\"http\")) {\n      const url = new URL(scannedText);\n      const kioskIdParam = url.searchParams.get(\"kioskId\");\n      if (kioskIdParam) {\n        localStorage.setItem(\"kioskId\", kioskIdParam);\n        navigate(`/upload?kioskId=${encodeURIComponent(kioskIdParam)}`);\n      } else {\n        alert(\"Invalid QR: No kioskId found\");\n      }\n    }\n\n    // Case 2: QR contains ONLY kioskId\n    else {\n      localStorage.setItem(\"kioskId\", scannedText);\n      navigate(`/upload?kioskId=${encodeURIComponent(scannedText)}`);\n    }\n  };\n  // -------------------------\n\n  const handleError = err => {\n    console.error(\"QR Scan Error:\", err);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.card,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"\\uD83D\\uDCF1 User Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), !scanning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.subtitle,\n          children: \"Welcome! To start printing, please scan the QR code shown on your kiosk machine.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.actions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.scanBtn,\n            onClick: () => setScanning(true),\n            children: \"\\uD83D\\uDD0D Scan Kiosk QR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.logoutBtn,\n            onClick: onLogout,\n            children: \"\\uD83D\\uDEAA Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.note,\n          children: \"Make sure your camera permission is enabled when scanning.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), scanResult && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: 20,\n            color: \"green\"\n          },\n          children: [\"\\u2705 Scanned Result: \", scanResult]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: \"10px\"\n          },\n          children: \"\\uD83D\\uDCF8 Scanning...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(QrScanner, {\n          delay: 300,\n          style: {\n            width: \"100%\",\n            borderRadius: \"10px\"\n          },\n          onError: handleError,\n          onScan: handleScan\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            ...styles.logoutBtn,\n            marginTop: \"20px\",\n            backgroundColor: \"#555\"\n          },\n          onClick: () => setScanning(false),\n          children: \"\\u2716 Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(UserHome, \"t6LubHo2p7F+/Htf+a6rbDxLWUw=\", false, function () {\n  return [useNavigate];\n});\n_c = UserHome;\nconst styles = {\n  container: {\n    height: \"100vh\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    background: \"linear-gradient(135deg, #74ABE2, #5563DE)\",\n    fontFamily: \"Segoe UI, Roboto, sans-serif\"\n  },\n  card: {\n    backgroundColor: \"white\",\n    padding: \"40px 50px\",\n    borderRadius: \"20px\",\n    boxShadow: \"0 8px 20px rgba(0,0,0,0.2)\",\n    textAlign: \"center\",\n    width: \"420px\"\n  },\n  title: {\n    fontSize: \"2rem\",\n    color: \"#333\",\n    marginBottom: \"20px\"\n  },\n  subtitle: {\n    fontSize: \"1.1rem\",\n    color: \"#555\",\n    marginBottom: \"30px\"\n  },\n  actions: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"20px\"\n  },\n  scanBtn: {\n    backgroundColor: \"#4CAF50\",\n    color: \"white\",\n    border: \"none\",\n    padding: \"15px 20px\",\n    fontSize: \"1.2rem\",\n    borderRadius: \"10px\",\n    cursor: \"pointer\"\n  },\n  logoutBtn: {\n    backgroundColor: \"#f44336\",\n    color: \"white\",\n    border: \"none\",\n    padding: \"12px 20px\",\n    fontSize: \"1.1rem\",\n    borderRadius: \"10px\",\n    cursor: \"pointer\"\n  },\n  note: {\n    marginTop: \"25px\",\n    fontSize: \"0.9rem\",\n    color: \"#777\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"UserHome\");","map":{"version":3,"names":["React","useState","QrScanner","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","UserHome","onLogout","_s","scanning","setScanning","scanResult","setScanResult","navigate","handleScan","result","scannedText","text","startsWith","url","URL","kioskIdParam","searchParams","get","localStorage","setItem","encodeURIComponent","alert","handleError","err","console","error","style","styles","container","children","card","title","fileName","_jsxFileName","lineNumber","columnNumber","subtitle","actions","scanBtn","onClick","logoutBtn","note","marginTop","color","marginBottom","delay","width","borderRadius","onError","onScan","backgroundColor","_c","height","display","alignItems","justifyContent","background","fontFamily","padding","boxShadow","textAlign","fontSize","flexDirection","gap","border","cursor","$RefreshReg$"],"sources":["C:/Users/kalya/OneDrive/Desktop/kiosk/kiosk_mongo/frontend/src/pages/UserHome.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport QrScanner from \"react-qr-scanner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function UserHome({ onLogout }) {\r\n  const [scanning, setScanning] = useState(false);\r\n  const [scanResult, setScanResult] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleScan = (result) => {\r\n  if (!result) return;\r\n\r\n  const scannedText = result.text;\r\n  setScanResult(scannedText);\r\n  setScanning(false);\r\n\r\n  // Case 1: QR contains a full URL like:\r\n  // https://yourapp.com/upload?kioskId=KIOSK12345\r\n  if (scannedText.startsWith(\"http\")) {\r\n    const url = new URL(scannedText);\r\n    const kioskIdParam = url.searchParams.get(\"kioskId\");\r\n\r\n    if (kioskIdParam) {\r\n      localStorage.setItem(\"kioskId\", kioskIdParam);\r\n      navigate(`/upload?kioskId=${encodeURIComponent(kioskIdParam)}`);\r\n    } else {\r\n      alert(\"Invalid QR: No kioskId found\");\r\n    }\r\n  }\r\n\r\n  // Case 2: QR contains ONLY kioskId\r\n  else {\r\n    localStorage.setItem(\"kioskId\", scannedText);\r\n    navigate(`/upload?kioskId=${encodeURIComponent(scannedText)}`);\r\n  }\r\n};\r\n// -------------------------\r\n\r\n  const handleError = (err) => {\r\n    console.error(\"QR Scan Error:\", err);\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <h1 style={styles.title}>üì± User Dashboard</h1>\r\n\r\n        {!scanning ? (\r\n          <>\r\n            <p style={styles.subtitle}>\r\n              Welcome! To start printing, please scan the QR code shown on your kiosk machine.\r\n            </p>\r\n\r\n            <div style={styles.actions}>\r\n              <button style={styles.scanBtn} onClick={() => setScanning(true)}>\r\n                üîç Scan Kiosk QR\r\n              </button>\r\n\r\n              <button style={styles.logoutBtn} onClick={onLogout}>\r\n                üö™ Logout\r\n              </button>\r\n            </div>\r\n\r\n            <p style={styles.note}>\r\n              Make sure your camera permission is enabled when scanning.\r\n            </p>\r\n\r\n            {scanResult && (\r\n              <p style={{ marginTop: 20, color: \"green\" }}>\r\n                ‚úÖ Scanned Result: {scanResult}\r\n              </p>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div>\r\n            <h3 style={{ marginBottom: \"10px\" }}>üì∏ Scanning...</h3>\r\n            <QrScanner\r\n              delay={300}\r\n              style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n              onError={handleError}\r\n              onScan={handleScan}\r\n            />\r\n            <button\r\n              style={{\r\n                ...styles.logoutBtn,\r\n                marginTop: \"20px\",\r\n                backgroundColor: \"#555\",\r\n              }}\r\n              onClick={() => setScanning(false)}\r\n            >\r\n              ‚úñ Cancel\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    background: \"linear-gradient(135deg, #74ABE2, #5563DE)\",\r\n    fontFamily: \"Segoe UI, Roboto, sans-serif\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"white\",\r\n    padding: \"40px 50px\",\r\n    borderRadius: \"20px\",\r\n    boxShadow: \"0 8px 20px rgba(0,0,0,0.2)\",\r\n    textAlign: \"center\",\r\n    width: \"420px\",\r\n  },\r\n  title: {\r\n    fontSize: \"2rem\",\r\n    color: \"#333\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  subtitle: {\r\n    fontSize: \"1.1rem\",\r\n    color: \"#555\",\r\n    marginBottom: \"30px\",\r\n  },\r\n  actions: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: \"20px\",\r\n  },\r\n  scanBtn: {\r\n    backgroundColor: \"#4CAF50\",\r\n    color: \"white\",\r\n    border: \"none\",\r\n    padding: \"15px 20px\",\r\n    fontSize: \"1.2rem\",\r\n    borderRadius: \"10px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  logoutBtn: {\r\n    backgroundColor: \"#f44336\",\r\n    color: \"white\",\r\n    border: \"none\",\r\n    padding: \"12px 20px\",\r\n    fontSize: \"1.1rem\",\r\n    borderRadius: \"10px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  note: {\r\n    marginTop: \"25px\",\r\n    fontSize: \"0.9rem\",\r\n    color: \"#777\",\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}